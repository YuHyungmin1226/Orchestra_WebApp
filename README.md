# 청소년 오케스트라 출석 관리 시스템

이 프로그램은 청소년 오케스트라의 출석을 관리하기 위한 경량 웹 기반 애플리케이션입니다. 이제 **SQLite 데이터베이스를 사용하여 데이터를 더욱 안정적으로 관리하며, CSV 파일 가져오기/내보내기 기능을 지원합니다.** 인터넷 연결 없이 사용자의 컴퓨터에서 직접 실행됩니다.

## 🌟 주요 업데이트 및 기능

*   **데이터베이스 전환:** 모든 데이터(단원 정보, 출석 기록 등)를 CSV 파일 대신 **SQLite 데이터베이스**에 저장하여 데이터의 안정성과 무결성을 강화했습니다.
*   **CSV 가져오기/내보내기:** 기존 CSV 데이터와의 호환성을 위해 모든 데이터베이스 테이블을 ZIP 파일로 내보내거나, ZIP 파일 형태의 CSV를 가져와 데이터베이스를 쉽게 업데이트할 수 있습니다.
*   **보안 강화:**
    *   **비밀번호 해싱:** 사용자 비밀번호가 안전하게 암호화되어 저장됩니다. (평문 비밀번호 노출 위험 제거)
    *   **SQL 인젝션 방지:** 잠재적인 SQL 인젝션 공격을 방지하기 위한 보안 조치가 적용되었습니다.
*   **데이터 무결성 개선:** 다단계 데이터 작업(예: 단원 추가 및 파트 배정) 시 트랜잭션 처리를 통해 데이터 일관성을 보장합니다.
*   **버그 수정:** 개인별 및 파트별 통계 리포트에서 발생하던 오류를 수정하여 정확한 통계를 제공합니다.

---

## 🚀 실행 방법

### 1. 저장소 클론

터미널(명령 프롬프트)을 열고, 프로젝트를 저장할 위치로 이동한 뒤 아래 명령어를 입력하세요:

```bash
git clone https://github.com/YuHyungmin1226/Orchestra_WebApp.git
cd Orchestra_WebApp
```

### 2. 필요한 라이브러리 설치 (최초 1회)

프로젝트 폴더로 이동한 뒤, 아래 명령어를 입력하여 필요한 파이썬 라이브러리들을 설치하세요:

```bash
python3 -m pip install -r requirements.txt
```
*   **참고:** `python3` 명령어를 사용해야 합니다. 시스템에 따라 `pip` 대신 `pip3`을 사용해야 할 수 있습니다.

### 3. 데이터베이스 초기화 (최초 1회 또는 데이터 재설정 시)

CSV 파일의 초기 데이터를 기반으로 SQLite 데이터베이스를 생성하고 데이터를 채웁니다. **이 과정은 `data` 폴더에 있는 CSV 파일들을 읽어 데이터베이스를 초기화하므로, 기존 CSV 파일의 변경사항을 반영하려면 이 명령어를 다시 실행해야 합니다.**

```bash
python3 web_files/server.py init-db
```
*   **경고:** 이 작업은 기존 데이터베이스 내용을 덮어쓸 수 있습니다.

### 4. 프로그램 실행

프로젝트 폴더에서 아래 명령어를 입력하여 애플리케이션을 실행하세요:

```bash
python3 run.py
```

### 5. 웹 브라우저 접속

프로그램이 실행되면 자동으로 웹 브라우저에 `http://127.0.0.1:8000` 주소로 관리 페이지가 열립니다.

### 6. 프로그램 종료

프로그램을 종료하려면, `run.py`를 실행했던 터미널(까만 창)을 닫거나 `Ctrl + C` 키를 누르세요.

---

## 📈 데이터 관리 및 활용 (새로운 기능)

웹 애플리케이션의 "데이터 조회" 탭에서 다음 기능을 사용할 수 있습니다.

*   **CSV로 내보내기 (Export to CSV):** 현재 데이터베이스에 저장된 모든 테이블의 데이터를 ZIP 압축 파일 형태의 CSV 파일로 내보낼 수 있습니다.
*   **CSV에서 가져오기 (Import from CSV):** 모든 테이블의 데이터를 포함하는 ZIP 압축 파일을 업로드하여 현재 데이터베이스의 내용을 해당 파일의 데이터로 대체할 수 있습니다.
    *   **경고:** 이 기능은 기존 데이터베이스의 모든 데이터를 업로드한 파일의 내용으로 덮어씁니다. 신중하게 사용하시고, 중요한 데이터는 미리 백업해두세요.

---

## 📁 폴더 구조

-   `.gitignore`: Git 버전 관리에서 제외할 파일 및 폴더 목록 (예: `.DS_Store`, `__pycache__`, `*.db`).
-   `README.md`: 프로젝트에 대한 설명 및 사용 방법을 담은 문서 (현재 보고 계신 파일).
-   `requirements.txt`: 실행에 필요한 파이썬 라이브러리 목록.
-   `run.py`: 프로그램을 실행하고 웹 서버를 관리하는 스크립트.
-   `data/`:
    *   `*.csv`: 초기 데이터베이스를 시딩하는 데 사용되는 원본 CSV 파일들.
    *   `orchestra.db`: SQLite 데이터베이스 파일 (Git 관리에서 제외).
-   `web_files/`: 프로그램의 로직과 웹 페이지 파일들이 들어있습니다.
    *   `database.py`: SQLite 데이터베이스 연결 및 CRUD 로직을 처리하는 파일.
    *   `server.py`: Flask 웹 서버의 백엔드 로직 (API 엔드포인트)을 정의하는 파일.
    *   `static/`: CSS 스타일(`style.css`) 및 JavaScript (`script.js`) 파일.
    *   `templates/`: HTML 템플릿 파일 (`index.html`).

---

**개발 환경:**

*   **Python 버전:** 3.8 이상 권장
*   **주요 라이브러리:** Flask, pandas, Werkzeug (보안을 위해 사용)
